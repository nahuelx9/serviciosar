<!doctype html>
<html  xmlns:th="http://www.thymeleaf.org"
       xmlns:sec="http:/www.thymeleaf.org/extras/spring-security">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/carousel/">
        <link href = "https://fonts.googleapis.com/css2? family = Rokkitt & display = swap" rel = "stylesheet">
        <link href = "https://fonts.googleapis.com/css2? family = Caladea: ital @ 1 & display = swap" rel = "stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Oswald|PT+Sans" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Alike&family=Great+Vibes&family=Old+Standard+TT:ital@1&display=swap" rel="stylesheet">
        <link rel="stylesheet" th:href="@{css/css.css}" type="text/css">
        <link rel="stylesheet" th:href="@{/webjars/sweetalert2/10.10.4/dist/sweetalert2.min.css}" type="text/css">
        <script th:src="@{/webjars/sweetalert2/10.10.4/dist/sweetalert2.min.js}"></script>
        <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">
        <link th:href="@{/css/carrousel.css}" rel="stylesheet">
        <link rel="stylesheet" th:href="@{/css/css.css}" type="text/css">


        <title>Servicios.com</title>
        <style>
            .bd-placeholder-img {
                font-size: 1.125rem;
                text-anchor: middle;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }

            @media (min-width: 768px) {
                .bd-placeholder-img-lg {
                    font-size: 3.5rem;
                }
            }
        </style>
    </head>
    <body>
        <header>
            <nav class="navbar navbar-light bg-dark ">
                <form  th:action="@{/buscarPorNombre}" method="GET" class="form-inline">
                    <input onkeyup="deshabilitarBtnBusquedaIndex()" class="form-control mr-sm-2 buscador" name="nombre" id="mensaje" type="search" placeholder="Busque un Servicio" aria-label="Search" >
                    <button class="btn btn-outline-success my-2 my-sm-1 botoncito botonbuscar" type="submit" id="btnBuscar" disabled>Buscar</button>
                </form>
                <h1 class="text-light text-right titulo">Servicios.com</h1>
                <div class="boton">
                    <button type="button" class=" serviciosbtn nav-link float-left text-light" data-toggle="modal" data-target="#staticBackdrop"  sec:authorize="hasRole('ROLE_ANONYMOUS')">Iniciar Sesion</button>
                    <a th:href="@{/agregarUsuario}"><button type="button" class=" serviciosbtn nav-link float-left text-light" sec:authorize="hasRole('ROLE_ANONYMOUS')" >Registrarse</button></a>
                    <a th:href="@{/serviciosUsuario/} + ${id}"><button type="button" class=" nav-link serviciosbtn  float-left  text-light" sec:authorize="hasRole('ROLE_USER')" >Mis Servcios</button></a>
                    <div sec:authorize="hasRole('ROLE_USER')" class="nav-item dropdown float-left">
                        <a class="nav-link dropdown-toggle text-light" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Cuenta
                        </a>
                        <div  id="myDiv" class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                            <a class="dropdown-item " th:href="@{/datosUsuario/} +  ${id}">Mis datos</a>
                            <form method="POST" class="cerrar-sesion"  th:action="@{/logout}">
                                <button onclick="this.parentNode.submit();" class="dropdown-item"  >Cerrar sesion</button>
                            </form>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <!--alertas -->
        <script th:if="${loginError}" type="text/javascript">
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'Usuario o contraseña incorrecto!',
                showConfirmButton: false,
                timer: 5000
            });
        </script>
        <script th:if="${newUser}" type="text/javascript">
            Swal.fire({
                icon: 'success',
                title: 'Usuario creado correctamente',
                text: 'Ya puedes inciar sesion',
                showConfirmButton: false,
                timer: 3500
            });
        </script>
        <script th:if="${datosModificados}" type="text/javascript">
            Swal.fire({
                icon: 'success',
                title: 'Los datos se modificarion correctamente',
                showConfirmButton: false,
                timer: 3500
            });
        </script>
    </script>
    <script th:if="${datosModificadosErrorEmail}" type="text/javascript">
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'El email ingresado es incorrecto o ya existe en el sistema!'
        });
    </script>
    <script th:if="${passwordCamposError}" type="text/javascript">
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Las contraseñas ingresadas son distintas!'
        });
    </script>
    <script th:if="${passwordInvalida}" type="text/javascript">
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'La contraseña ingresada es invalida!'
        });
    </script>

    <script th:if="${servicioCreado}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'El servicio fue creado correctamente',
            showConfirmButton: false,
            timer: 3500
        });
    </script>

    <script th:if="${servicioModificado}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'El servicio fue modifcado correctamente',
            showConfirmButton: false,
            timer: 3500
        });
    </script>


    <script th:if="${servicioEliminado}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'El servicio fue eliminado',
            showConfirmButton: false,
            timer: 3500
        });
    </script>

    <script th:if="${imagenModificada}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'La imagen fue modificada con exito',
            showConfirmButton: false,
            timer: 3500
        });
    </script>

    <script th:if="${imagenGuardada}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'La imagen fue guardada con exito',
            showConfirmButton: false,
            timer: 3500
        });
    </script>
    <script th:if="${imagenEliminada}" type="text/javascript">
        Swal.fire({
            icon: 'success',
            title: 'La imagen fue eliminada',
            showConfirmButton: false,
            timer: 3500
        });
    </script>

    <script th:if="${imagenModificadaError}" type="text/javascript">
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'El formato de la imagen es invalido!'
        });
    </script>


    <main role="main" class="flex-shrink-0">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                <li data-target="#myCarousel" data-slide-to="1"></li>
                <li data-target="#myCarousel" data-slide-to="2"></li>
                <li data-target="#myCarousel" data-slide-to="3"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img th:src="@{img/1.jpg}" alt="imagenMuestra">
                    <svg class="bd-placeholder-img"  width="100%" height="100%"  xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"/></svg>
                    <div class="container">
                        <div class="carousel-caption text-left">
                            <h1 class="promocion">ENCONTRA LO QUE ESTAS BUSCANDO</h1>
                            <h3 class="promocion">Encuentra los mejores animadroes,musicos,fotografos y mucho mas para volver tus fiestas mas entretenidas </h3>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img th:src="@{img/4.jpg}" alt="servicios de fiesta,mantenimientoentretenimiento,educacion,bienestar,finanzas">
                    <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"/></svg>
                    <div class="container">
                        <div class="carousel-caption">
                            <h1 class="promocion">PROMOCIONA TU TRABAJO</h1>
                            <h3 class="promocion">En SERVICIOS.COM queremos ayudarte a que mas personas conozcan lo que haces para que  tu productividad vaya en aumento</h3>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img th:src="@{img/22.jpg}" alt="imagenMuestra">
                    <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"/></svg>
                    <div class="container">
                        <div class="carousel-caption text-leftt">
                            <h1 class="promocion ">CONSULTA CON LOS MEJORES</h1>
                            <h3 class="promocion">Conoce la amplia gama de profesionales que estan registrados en nuesta plataforma  finanzas,bienestar,educacion</h3>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <img th:src="@{img/33.jpg}" alt="imagenMuestra">
                    <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"/></svg>
                    <div class="container">
                        <div class="carousel-caption text-center">
                            <h1 class="promocion">TENEMOS LA SOLUCION A TUS PROBLEMAS</h1>
                            <h3 class="promocion">Problemas con plomeria,gas,elctridad,ventilacion entre mucho mas encontra todos los especialistas en un  solo lugar </h3>
                        </div>
                    </div>
                </div>
            </div>
            <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div> 

        <div class=" container">
            <h2 class="titulomenu mb-5">conoce todos los servicios diponibles a continuacion</h2>
            <div class="d-flex justify-content-around contenedor-img ">
                <div  class="menu-servicios order-1  menu-lista-servicios">
                    <div class="contenido-lista">
                    <h3 class="text-center text-light mb-2">LISTA DE SERVICIOS</h3>
                   <a th:href="@{/buscar}"> <button type="button" class="btn btn-outline-light  btn-lg btn-block">VER LISTA</button></a>
                    </div>
                </div>
                <div  class="menu-servicios order-2  menu-promocio-servicios">
                      <div class="contenido-lista">
                    <h3 class="text-center text-light">PROMOCIONA TU SERVICIO</h3>
                    <button sec:authorize="hasRole('ROLE_ANONYMOUS')" type="button" class="btn btn-outline-light  btn-lg btn-block" data-toggle="modal" data-target="#exampleModal">PROMOCIONAR</button>
                    <a  sec:authorize="hasRole('ROLE_USER')"  th:if="${usuario.getServicios().size() <= 3}"  th:href="@{/agregarServicio}"><button type="button" class="btn btn-outline-light  btn-lg btn-block">PROMOCIONAR</button></a>
                    <button sec:authorize="hasRole('ROLE_USER')"  th:if="${usuario.getServicios().size() >= 4}" type="button" class="btn btn-outline-light  btn-lg btn-block pop" data-toggle="popover" data-placement="bottom" data-content="Por el momento solo se permiten 4 Servicios por usuario">PROMOCIONAR</button>
                    </div>
                </div>
            </div>

        </div>

        <!-- <section class="seccion contenedor">
               <h2 class="titulomenu">conoce todos los servicios diponibles a continuacion</h2>
               <a th:href="@{/buscar}"><button type="button" class="btn btn-outline-success  btn-lg btn-block lista">Ir a la lista de servicios</button></a>
               <button sec:authorize="hasRole('ROLE_ANONYMOUS')" type="button" class="btn btn-outline-success btn-lg btn-block lista" data-toggle="modal" data-target="#exampleModal" >Promociona tu Servicio</button>
               <a  sec:authorize="hasRole('ROLE_USER')"  th:if="${usuario.getServicios().size() <= 3}"  th:href="@{/agregarServicio}"><button type="button" class="btn btn-outline-success btn-lg btn-block lista"   >Promociona tu Servicio</button></a>
               <button  sec:authorize="hasRole('ROLE_USER')"  th:if="${usuario.getServicios().size() >= 4}" type="button" class="btn btn-outline-success btn-lg btn-block lista pop"   data-container="body" data-toggle="popover" data-placement="bottom" data-content="Por el momento solo se permiten 4 Servicios por usuario" >Promociona tu Servicio</button></a>
           </section><!--seccion-->
    </main>

    <!-- Modal iniciar sesion -->
    <div class="modal fade" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-dark text-light">
                    <h5 class="modal-title" id="staticBackdropLabel">Iniciar Sesion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form method="POST" th:action="@{/login}">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="username">Email</label>
                            <input type="text" class="form-control" name="username" id="username" aria-describedby="emailHelp">
                        </div>
                        <div class="form-group">
                            <label for="password">Contraseña</label>
                            <input type="password" class="form-control" name="password" id="password">
                        </div>
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="exampleCheck1">
                            <label class="form-check-label" for="exampleCheck1">Recordar mi cuenta</label>
                        </div>
                    </div>
                    <div class="modal-footer bg-dark">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary btn btn-success">Iniciar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Modal Registrar Servicio Error -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="agregarServicioErrorLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-dark text-light">
                    <h5 class="modal-title" id="exampleModalLabel">Registro</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Nos emociona que hayas elegido SERVICIOS.COM para promocionar tus servicio pero antes es necesario que te registres en nuestra plataforma es muy facil solo debes completar algunos de tus datos,
                    una vez registrado vuelve a presionar este boton.
                </div>
                <div class="modal-footer bg-dark">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                    <a href="registro.html"><button type="submit" class="btn btn-primary btn btn-success">Registrarse</button></a>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer class="page-footer font-small blue footerIndex">

        <!-- Copyright -->
        <div class="footer-copyright text-center py-3 ">© 2020 Copyright:
            <a th:href="@{/}"  class="text-success"> Servicios.com</a>|
            <b>User:</b><span sec:authentication="name">Usuario logueado</span>|
        </div>
        <!-- Copyright -->
    </footer>
    <!-- Footer -->
    <!-- Footer -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script th:src="@{/webjars/jquery/3.4.0/jquery.min.js}"></script>
    <script th:src="@{/webjars/popper.js/1.14.3/umd/popper.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/4.4.1-1/js/bootstrap.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/js.js}"></script>
    <script src="https://kit.fontawesome.com/9c123ffe91.js" crossorigin="anonymous"></script>

</body>
</html>